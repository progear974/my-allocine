{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('detail_movie') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('detail_movie') }}
{% endblock %}

{% block content %}
    <section class="u-align-center u-border-1 u-border-palette-5-light-2 u-clearfix u-section-1" id="sec-5cc1">
        <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
            <h1 class="u-text u-text-default u-text-1">{{ movie.title|upper }}</h1>
        </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-6ef4">
        <div class="u-align-left u-clearfix u-sheet u-valign-middle-sm u-sheet-1">
            <div class="u-clearfix u-expanded-width u-gutter-0 u-layout-wrap u-layout-wrap-1">
                <div class="u-layout">
                    <div class="u-layout-row">
                        <div class="u-container-style u-layout-cell u-shape-rectangle u-size-15-lg u-size-15-xl u-size-19-md u-size-19-sm u-size-19-xs u-layout-cell-1">
                            <div class="u-border-1 u-border-no-bottom u-border-no-left u-border-no-top u-border-palette-5-light-2 u-container-layout u-valign-middle-xl u-valign-top-sm u-container-layout-1">
                                <img class="u-absolute-hcenter-xs u-expanded-height-xs u-image u-image-default u-image-1" src="https://image.tmdb.org/t/p/w500/{{ movie.poster_path }}" alt="" data-image-width="310" data-image-height="420">
                            </div>
                        </div>
                        <div class="u-align-left u-container-style u-layout-cell u-shape-rectangle u-size-41-md u-size-41-sm u-size-41-xs u-size-45-lg u-size-45-xl u-layout-cell-2">
                            <div class="u-container-layout u-container-layout-2">
                                <p class="u-custom-font u-font-oswald u-text u-text-1">
                                    <span class="u-text-palette-1-base">{{ movie.release_date|date('j F Y') }}</span> en salle <span style="font-weight: 400;">/ {{ (movie.runtime / 60)|round(0, 'floor') }}h{{ movie.runtime % 60 }}min / {% for genre in movie.genres %}{{ genre["name"] }}, {% endfor %}</span>
                                </p>
                                <p class="u-custom-font u-font-oswald u-text u-text-2">
                                    <span style="font-weight: 400;">De</span>
                                    {% for crew_member in credit["crew"] %}
                                        {% if crew_member["job"] == "Director" %}
                                            {{ crew_member["original_name"] }},
                                        {% endif %}
                                    {% endfor %}
                                </p>
                                <p class="u-custom-font u-font-oswald u-text u-text-4"><span style="font-weight: 400;">Avec</span>
                                    {% for cast_member in credit["cast"] %}
                                        {% if cast_member["popularity"] >= 15 %}
                                            {{ cast_member["original_name"] }},
                                        {% endif %}
                                    {% endfor %} etc...</p>
                                <p class="u-custom-font u-font-oswald u-text u-text-5"><span style="font-weight: 400;">Titre original :</span> {{ movie["original_title"] }}</p>
                                <a data-bs-toggle="modal" data-bs-target="#staticBackdrop" class=" u-border-1 u-border-grey-75 u-border-hover-grey-15 u-btn u-btn-round u-button-style u-hover-palette-1-light-3 u-palette-1-light-3 u-radius-9 u-text-black u-text-hover-black u-btn-1">
                                    <span class="u-file-icon u-icon u-icon-1">
                                        <img src="{{ asset('build/images/2311991.png') }}" alt="">
                                    </span>&nbsp;Ajouter Ã  une playlist
                                </a>
                                <span class="u-align-left u-border-3 u-border-grey-10 u-icon u-icon-circle u-icon-2" id="like" style="display: none">
                                    <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 50 50" style="">
                                        <use xlink:href="#svg-e0a0"></use></svg><svg class="u-svg-content" viewBox="0 0 50 50" x="0px" y="0px" id="svg-e0a0" style="enable-background:new 0 0 50 50;">
                                        <path style="fill:currentColor;" d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543
	c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503
	c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z"></path>
                                    </svg>
                                </span>
                                <a href="" class="u-border-none u-btn u-btn-round u-button-style u-gradient u-none u-radius-4 u-text-body-alt-color u-btn-2" id="viewed" style="display: none">
                                    <span class="u-file-icon u-icon u-text-white">
                                        <img src="{{ asset('build/images/7.png') }}" alt="">
                                    </span>&nbsp;j'AI VU
                                </a>
                                <span class="u-align-left u-border-3 u-border-grey-10 u-icon u-icon-circle u-icon-2" id="unlike" style="display: none">
                                    <img src="{{ asset('build/images/8.png') }}" alt="">
                                </span>
                                <a href="" class="u-btn u-btn-round u-button-style u-gradient u-none u-radius-4 u-text-body-alt-color u-btn-3" id="not_viewed" style="display: none">
                                    <span class="u-icon"></span>&nbsp; <span class="u-file-icon u-icon u-text-white"><img src="{{ asset('build/images/7.png') }}" alt=""></span>&nbsp;j'AI pas Vu
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="u-align-left u-clearfix u-section-3" id="sec-9d25">
        <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
            <div class="fr-view u-clearfix u-rich-text u-text u-text-1">
                <h1 style="text-align: left;">Synopsis</h1>
                <p style="text-align: left;">
                    <span style="font-size: 1.25rem;">{{ movie["overview"] }}</span>
                </p>
            </div>
        </div>
    </section>
    {% if movie["videos"]["results"] | length > 0 %}
        <section class="u-align-center u-clearfix u-section-4" id="sec-62a6">
            <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
                <h1 class="u-text u-text-default u-text-1">Bande d'annonce</h1>
            </div>
        </section>
        <section class="u-clearfix u-section-5" id="sec-49cf">
            <div class="u-clearfix u-sheet u-sheet-1">
                <div class="u-align-left u-expanded-width u-left-0 u-video u-video-contain u-video-1">
                    <div class="embed-responsive embed-responsive-1">
                        <iframe id="player" type="text/html" style="position: absolute; top: 0; left: 0; width:100%; height:100%;"
                                src="https://www.youtube.com/embed/{{ movie["videos"]["results"][0]["key"] }}?enablejsapi=1&mute=0&amp;showinfo=1&amp;controls=1&amp;start=0"
                                frameborder="0" allow="fullscreen;"></iframe>
{#                        <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;" class="embed-responsive-item" src="https://www.youtube.com/embed/SqH3-sCkZQw?mute=0&amp;showinfo=1&amp;controls=1&amp;start=0" frameborder="0" allowfullscreen=""></iframe>#}
                    </div>
                </div>
            </div>
        </section>
    {% endif %}
    <!-- Vertically centered modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Choisi la playlist et confirme</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                {{ form_start(form) }}
                    <div class="modal-body">
                        {{ form_widget(form.playlist) }}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Confirmer</button>
                    </div>
                {{ form_end(form) }}

            </div>
        </div>
    </div>

{% endblock %}
